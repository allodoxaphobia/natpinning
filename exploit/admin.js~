function getContent(page){
	xmlhttp=new XMLHttpRequest();
	xmlhttp.open("GET",page,false);
	xmlhttp.send();
	return xmlhttp.responseText;
}
function UpdateClients(){
	var clients = getContent("xClients");
	var data ="";
	if (clients==""){
		var url = document.URL;
		url = url.replace("admin.html","exploit.html?ci=PRIVATE_IP_Of_CLIENT");
		data="<tr><td colspan=4>No clients found..."
		data+="<br>To connect a client, let them naviguate to "+url;
		data+="</td></tr>";
	}else{
		data = DataToTable(clients,"|");
	}
	var tblClients = document.getElementById("tblClients");
	tblClients.innerHTML = tblClientsHeader + data;
	}
function UpdateClientResults(rowID){
	var results = getContent("xResults?"+rowID);
	var data ="";
	if (results==""){
		data = "<tr><td colspan=5>Click on a Client ID to get testresults for that client.</td></tr>";
	}else{
		data=DataToTable(results,"|");
	}
	var tblResults = document.getElementById("tblResults");
	tblResults.innerHTML = tblResultsHeader + data;
}
function handle_clientClick(rowID){
	UpdateClientResults(rowID);
}
function DataToTable(data, splitter){
	if (data.length==0){
		return "";
	}else{
		var result ="";
		arrRows = data.split("\n");
		for (var i=0;i<arrRows.length;i++){
			result = result + "<tr>" 
			var arrColls = arrRows[i].split(splitter);
			for (var y=0;y<arrColls.length;y++){
				result = result + "<td>"
				result = result + arrColls[y];
				result = result + "</td>"
			}
			result = result + "</tr>\n" 
		}
		return result
	}
}
